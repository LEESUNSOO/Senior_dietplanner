<!DOCTYPE html>
<html lang="en">
<head>
    {{ fontawesome_html() }}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script  src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="{{ url_for('static', filename='analysis.js') }}" type="text/javascript"> </script>
    <link href="{{ url_for('static', filename='analysis.css') }}" rel="stylesheet" type="text/css">
    <link href="{{url_for('static', filename='all.css')}}" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/moonspam/NanumSquare/master/nanumsquare.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="url_for{{'https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css'}}">
   <link href="{{url_for('static', filename='fontawesome.min.css')}}" rel="stylesheet">
    <script async="" src="//www.google-analytics.com/analytics.js"></script>
    <script src="https://www.chartjs.org/dist/2.9.1/Chart.min.js"></script>
    <script src="https://www.chartjs.org/samples/latest/utils.js"></script>
    <style type="text/css">/* Chart.js */
@keyframes chartjs-render-animation{from{opacity:.99}to{opacity:1}}.chartjs-render-monitor{animation:chartjs-render-animation 1ms}.chartjs-size-monitor,.chartjs-size-monitor-expand,.chartjs-size-monitor-shrink{position:absolute;direction:ltr;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1}.chartjs-size-monitor-expand>div{position:absolute;width:1000000px;height:1000000px;left:0;top:0}.chartjs-size-monitor-shrink>div{position:absolute;width:200%;height:200%;left:0;top:0}</style>
    <title>食의 고수</title>
    <script>
window.onload = function() {
<!--    var diet_list=JSON.stringify({{diet_list}}).replace('&#39;', '');-->
<!--    var cos_sim=(parseFloat(diet_list[0][0]['thisweek'][0][0][0][4])+parseFloat(diet_list[0][0]['thisweek'][1][1][0][4])+parseFloat(diet_list[0][0]['thisweek'][2][2][0][4])+parseFloat(diet_list[0][0]['thisweek'][3][3][0][4])+parseFloat(diet_list[0][0]['thisweek'][4][4][0][4])+float(diet_list[0][0]['thisweek'][5][5][0][4])+parseFloat(diet_list[0][0]['thisweek'][6][6][0][4]))/7;-->
    var cos_sim=0.98;
    $('.final_sim').text('약 '+cos_sim.toFixed(2)+'%');
var chart = new CanvasJS.Chart("chartContainer", {
	theme: "light2", // "light1", "light2", "dark1", "dark2"
	exportEnabled: true,
	animationEnabled: true,
	title: {
		text: "영양소 정보"
	},
	data: [{
		type: "pie",
		startAngle: 45,
		toolTipContent: "<b>{label}</b>: {y}%",
		showInLegend: "true",
		legendText: "{label}",
		indexLabelFontSize: 13,
		indexLabel: "{label} - {y}%",
		dataPoints: [
			{ y: 51.08, label: "탄수화물" },
			{ y: 27.34, label: "지방" },
			{ y: 10.62, label: "단백질" },
		]
	}]
});
chart.render();
    var chart2 = new CanvasJS.Chart("chartContainer2", {
	animationEnabled: true,
	zoomEnabled: true,
	title:{
		text: "나트륨함량 정보"
	},
	axisX: {
		title:"나트륨 수치",
		minimum: 790,
		maximum: 2260
	},
	axisY:{
		title: "균형식단 기준",
		valueFormatString: "#,##0"
	},
	data: [{
		type: "scatter",
		toolTipContent: "<b>나트륨: </b>{x}mg<br/><b>균형 나트륨: </b>{y}mg",
		dataPoints: [
			{ x: 800, y: 350 },
			{ x: 900, y: 450 },
			{ x: 850, y: 450 },
			{ x: 1250, y: 700 },
			{ x: 1100, y: 650 },
			{ x: 1350, y: 850 },
			{ x: 1200, y: 900 },
		]
	}]
});
chart2.render();

var chart3 = new CanvasJS.Chart("chartContainer3", {
	animationEnabled: true,
	zoomEnabled: true,
	title:{
		text: "총 당류 함량 정보"
	},
	axisX: {
		title:"당류 함량",
		minimum: 0,
		maximum: 30
	},
	axisY:{
		title: "균형식단 기준",
		valueFormatString: "##0"
	},
	data: [{
		type: "scatter",
		toolTipContent: "<b>총 당 함량: </b>{x}mg<br/><b>기준 당량: </b>{y}mg",
		dataPoints: [
			{ x: 8.4, y: 9 },
			{ x: 5.9, y: 7 },
			{ x: 6.5, y: 7 },
			{ x: 4.7, y: 6.2 },
			{ x: 6.5, y: 7.3 },
			{ x: 4.9, y: 6.7 },
			{ x: 5.2, y: 7 },
		]
	}]
});
chart3.render();

    $(".canvasjs-chart-credit").hide();
}
</script>

</head>
<body>
 <header>
        <div id="logo">
            <a href="/"><img src="{{url_for('static', filename='images/logo_re.png')}}"></a>
        </div>
         <div id="main_title">
            <h3 class="title_text" style="font-size:15px; font-family:'nanumsquare'; color:#dimgray; font-weight:normal;"> 식의 고수에서 맞춤형 건강 식단을 만나보세요.</h3>
        </div>
        <nav>
         <ul>
                <li>신메뉴</li>
             <li><a>오늘의 메뉴 보기</a></li>
             <li><a href="/analysis">식단 분석표</a></li>
              <li><i class="fas fa-utensils" style="color:#ff3300; font-size:20px;"></i></li>
            </ul>

        </nav>

    </header>

   <div class="container_wrap">
       <div class="container">
           <p class="hidden" style="display:none;">{{diet_list}}</p>
    <br>
      <div class="left_div">
      <div clss="title_line">
        <h3 class="result_title">" 식단 분석표 정보를 확인해보세요. "</h3>
<!--        <p>{{days}}</p>-->
          <h4 class="duration" >{{date}} ~ {{date2}}</h4>
    <div class="btns">
     <span class="prev_week hover_span">지난주</span><span class="this_week hover_span">이번주</span><span class="nxt_week hover_span">다음주</span>
    </div>  <br><br><br><br>
          <div class="congruity">
            <h4 style="text-align:center; position:relative; left:60px;font-size:22px;">한국인 영양섭취권고 기준 대비 일치도</h4>
          <br><br>
<!--              {{diet_list[0][0]['thisweek'][0][0][0][4]}}-->
          <span class='final_sim' style="position:relative; left:170px;font-size:35px;font-weight:bolder;color:#ff3300;"> 약 {{diet_list[0][0]['thisweek'][0][0][0][4]}}%</span>

          </div>


      </div>

      </div>
           <div class="left_div right_div">
           <div class="graphs graph_1">
<!--        <h4>탄/단/지 비율</h4>-->
        <div id="chartContainer" style="height: 300px; width: 100%;"></div>

      </div>

           </div>
    <div class="table_con">
<!--        <p class="diet_list"><br><br><br>-->
<!--            {{diet_list[0][0]['thisweek'][0][0]}}<br>-->
<!--            {{diet_list[0][0]['thisweek'][1][1]}}<br>-->
<!--            {{diet_list[0][0]['thisweek'][2][2]}}<br>-->
<!--            {{diet_list[0][0]['thisweek'][3][3]}}<br>-->
<!--            {{diet_list[0][0]['thisweek'][4][4]}}<br>-->
<!--            {{diet_list[0][0]['thisweek'][5][5]}}<br>-->
<!--            {{diet_list[0][0]['thisweek'][6][6]}}-->
<!--        </p>-->
        <div class="graphs graph_3">
<!--        <h4>총 당류 </h4>-->
          <div id="chartContainer3" style="height: 300px; width: 100%;"></div>
      </div>


      <div class="graphs graph_2">
<!--        <h4>나트륨 수준</h4>-->
          <div id="chartContainer2" style="height: 300px; width: 100%;"></div>
      </div>


        <div class="diet_info">
<!--                <p class="diet_list"><br><br><br>-->
<!--            {{diet_list[0][0]['thisweek'][0][0]}}<br>-->
<!--            {{diet_list[0][0]['thisweek'][1][1]}}<br>-->
<!--            {{diet_list[0][0]['thisweek'][2][2]}}<br>-->
<!--            {{diet_list[0][0]['thisweek'][3][3]}}<br>-->
<!--            {{diet_list[0][0]['thisweek'][4][4]}}<br>-->
<!--            {{diet_list[0][0]['thisweek'][5][5]}}<br>-->
<!--            {{diet_list[0][0]['thisweek'][6][6]}}-->
<!--        </p>-->
        </div>
    </div>


  </div>
   </div>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

</body>
</html>